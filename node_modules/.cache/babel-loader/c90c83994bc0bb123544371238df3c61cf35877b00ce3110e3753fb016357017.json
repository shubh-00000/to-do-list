{"ast":null,"code":"'use client';\n\nimport { useRef, useState, useEffect } from 'react';\nimport { useTimeout, useMutationObserver } from '@mantine/hooks';\nimport 'react/jsx-runtime';\nimport { getEnv } from '../../core/utils/get-env/get-env.mjs';\nimport 'clsx';\nimport '../../core/MantineProvider/Mantine.context.mjs';\nimport '../../core/MantineProvider/default-theme.mjs';\nimport '../../core/MantineProvider/MantineProvider.mjs';\nimport '../../core/MantineProvider/MantineThemeProvider/MantineThemeProvider.mjs';\nimport '../../core/MantineProvider/MantineCssVariables/MantineCssVariables.mjs';\nimport '../../core/Box/Box.mjs';\nimport '../../core/DirectionProvider/DirectionProvider.mjs';\nfunction isParent(parentElement, childElement) {\n  if (!childElement || !parentElement) {\n    return false;\n  }\n  let parent = childElement.parentNode;\n  while (parent != null) {\n    if (parent === parentElement) {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\nfunction useFloatingIndicator({\n  target,\n  parent,\n  ref,\n  displayAfterTransitionEnd\n}) {\n  const transitionTimeout = useRef();\n  const [initialized, setInitialized] = useState(false);\n  const [hidden, setHidden] = useState(typeof displayAfterTransitionEnd === \"boolean\" ? displayAfterTransitionEnd : false);\n  const updatePosition = () => {\n    if (!target || !parent) {\n      return;\n    }\n    const targetRect = target.getBoundingClientRect();\n    const parentRect = parent.getBoundingClientRect();\n    const position = {\n      top: targetRect.top - parentRect.top,\n      left: targetRect.left - parentRect.left,\n      width: targetRect.width,\n      height: targetRect.height\n    };\n    if (ref.current) {\n      ref.current.style.transform = `translateY(${position.top}px) translateX(${position.left}px)`;\n      ref.current.style.width = `${position.width}px`;\n      ref.current.style.height = `${position.height}px`;\n    }\n  };\n  const updatePositionWithoutAnimation = () => {\n    window.clearTimeout(transitionTimeout.current);\n    if (ref.current) {\n      ref.current.style.transitionDuration = \"0ms\";\n    }\n    updatePosition();\n    transitionTimeout.current = window.setTimeout(() => {\n      if (ref.current) {\n        ref.current.style.transitionDuration = \"\";\n      }\n    }, 30);\n  };\n  const targetResizeObserver = useRef();\n  const parentResizeObserver = useRef();\n  useEffect(() => {\n    updatePosition();\n    if (target) {\n      targetResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n      targetResizeObserver.current.observe(target);\n      if (parent) {\n        parentResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n        parentResizeObserver.current.observe(parent);\n      }\n      return () => {\n        targetResizeObserver.current?.disconnect();\n        parentResizeObserver.current?.disconnect();\n      };\n    }\n    return void 0;\n  }, [parent, target]);\n  useEffect(() => {\n    if (parent) {\n      const handleTransitionEnd = event => {\n        if (isParent(event.target, parent)) {\n          updatePositionWithoutAnimation();\n          setHidden(false);\n        }\n      };\n      parent.addEventListener(\"transitionend\", handleTransitionEnd);\n      return () => {\n        parent.removeEventListener(\"transitionend\", handleTransitionEnd);\n      };\n    }\n    return void 0;\n  }, [parent]);\n  useTimeout(() => {\n    if (getEnv() !== \"test\") {\n      setInitialized(true);\n    }\n  }, 20, {\n    autoInvoke: true\n  });\n  useMutationObserver(mutations => {\n    mutations.forEach(mutation => {\n      if (mutation.type === \"attributes\" && mutation.attributeName === \"dir\") {\n        updatePositionWithoutAnimation();\n      }\n    });\n  }, {\n    attributes: true,\n    attributeFilter: [\"dir\"]\n  }, () => document.documentElement);\n  return {\n    initialized,\n    hidden\n  };\n}\nexport { useFloatingIndicator };","map":{"version":3,"names":["isParent","parentElement","childElement","parent","parentNode","useFloatingIndicator","target","ref","displayAfterTransitionEnd","transitionTimeout","useRef","initialized","setInitialized","useState","hidden","setHidden","updatePosition","targetRect","getBoundingClientRect","parentRect","position","top","left","width","height","current","style","transform","updatePositionWithoutAnimation","window","clearTimeout","transitionDuration","setTimeout","targetResizeObserver","parentResizeObserver","useEffect","ResizeObserver","observe","disconnect","handleTransitionEnd","event","addEventListener","removeEventListener","useTimeout","getEnv","autoInvoke","useMutationObserver","mutations","forEach","mutation","type","attributeName","attributes","attributeFilter","document","documentElement"],"sources":["C:\\Users\\arora\\OneDrive\\Desktop\\g\\new\\node_modules\\@mantine\\core\\src\\components\\FloatingIndicator\\use-floating-indicator.ts"],"sourcesContent":["import { RefObject, useEffect, useRef, useState } from 'react';\nimport { useMutationObserver, useTimeout } from '@mantine/hooks';\nimport { getEnv } from '../../core';\n\nfunction isParent(\n  parentElement: HTMLElement | EventTarget | null,\n  childElement: HTMLElement | null\n) {\n  if (!childElement || !parentElement) {\n    return false;\n  }\n\n  let parent = childElement.parentNode;\n  while (parent != null) {\n    if (parent === parentElement) {\n      return true;\n    }\n    parent = parent.parentNode;\n  }\n  return false;\n}\n\ninterface UseFloatingIndicatorInput {\n  target: HTMLElement | null | undefined;\n  parent: HTMLElement | null | undefined;\n  ref: RefObject<HTMLDivElement>;\n  displayAfterTransitionEnd?: boolean;\n}\n\nexport function useFloatingIndicator({\n  target,\n  parent,\n  ref,\n  displayAfterTransitionEnd,\n}: UseFloatingIndicatorInput) {\n  const transitionTimeout = useRef<number>();\n  const [initialized, setInitialized] = useState(false);\n\n  const [hidden, setHidden] = useState(\n    typeof displayAfterTransitionEnd === 'boolean' ? displayAfterTransitionEnd : false\n  );\n\n  const updatePosition = () => {\n    if (!target || !parent) {\n      return;\n    }\n\n    const targetRect = target.getBoundingClientRect();\n    const parentRect = parent.getBoundingClientRect();\n\n    const position = {\n      top: targetRect.top - parentRect.top,\n      left: targetRect.left - parentRect.left,\n      width: targetRect.width,\n      height: targetRect.height,\n    };\n\n    if (ref.current) {\n      ref.current.style.transform = `translateY(${position.top}px) translateX(${position.left}px)`;\n      ref.current.style.width = `${position.width}px`;\n      ref.current.style.height = `${position.height}px`;\n    }\n  };\n\n  const updatePositionWithoutAnimation = () => {\n    window.clearTimeout(transitionTimeout.current);\n    if (ref.current) {\n      ref.current.style.transitionDuration = '0ms';\n    }\n    updatePosition();\n    transitionTimeout.current = window.setTimeout(() => {\n      if (ref.current) {\n        ref.current.style.transitionDuration = '';\n      }\n    }, 30);\n  };\n\n  const targetResizeObserver = useRef<ResizeObserver>();\n  const parentResizeObserver = useRef<ResizeObserver>();\n\n  useEffect(() => {\n    updatePosition();\n\n    if (target) {\n      targetResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n      targetResizeObserver.current.observe(target);\n\n      if (parent) {\n        parentResizeObserver.current = new ResizeObserver(updatePositionWithoutAnimation);\n        parentResizeObserver.current.observe(parent);\n      }\n\n      return () => {\n        targetResizeObserver.current?.disconnect();\n        parentResizeObserver.current?.disconnect();\n      };\n    }\n\n    return undefined;\n  }, [parent, target]);\n\n  useEffect(() => {\n    if (parent) {\n      const handleTransitionEnd = (event: TransitionEvent) => {\n        if (isParent(event.target, parent)) {\n          updatePositionWithoutAnimation();\n          setHidden(false);\n        }\n      };\n\n      parent.addEventListener('transitionend', handleTransitionEnd);\n      return () => {\n        parent.removeEventListener('transitionend', handleTransitionEnd);\n      };\n    }\n\n    return undefined;\n  }, [parent]);\n\n  useTimeout(\n    () => {\n      // Prevents warning about state update without act\n      if (getEnv() !== 'test') {\n        setInitialized(true);\n      }\n    },\n    20,\n    { autoInvoke: true }\n  );\n\n  useMutationObserver(\n    (mutations) => {\n      mutations.forEach((mutation) => {\n        if (mutation.type === 'attributes' && mutation.attributeName === 'dir') {\n          updatePositionWithoutAnimation();\n        }\n      });\n    },\n    { attributes: true, attributeFilter: ['dir'] },\n    () => document.documentElement\n  );\n\n  return { initialized, hidden };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}